<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/twittler-styles.css">
    <link href="https://fonts.googleapis.com/css?family=Alegreya+Sans:400,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Berkshire+Swash" rel="stylesheet">
  </head>
  <body>
    <script>
      $(document).ready(function(){
        var $feed = $('.js-feed');
        $feed.html('');
        var displayedTweets = [];

        var displayTweets = function(){
          var index = streams.home.length - 1;
          while(index >= 0){
            var tweet = streams.home[index];
            if(!displayedTweets.includes(tweet)){
              var $tweet = $('<div class="twittler__tweet js-tweet"><span class="twittler__tweet-user js-tweet-user" data-user-name=""></span> â€¢ <span class="twittler__tweet-time js-tweet-time"></span><span class="twittler__tweet-msg js-tweet-msg"></span></div>');
              $tweet.find('.js-tweet-user').text('@' + tweet.user);
              $tweet.find('.js-tweet-user').attr('data-user-name', tweet.user.toString());
              $tweet.find('.js-tweet-time').text(tweet.created_at.toString().split(' GMT')[0]);
              $tweet.find('.js-tweet-msg').text(tweet.message);
              $tweet.appendTo($feed);
              displayedTweets.push(tweet);
            }
            index -= 1;
          }
          $feed.append('<button class="twittler__load-more-btn js-load-more">Load More</button>');
        };

        displayTweets();

        $('.js-load-more').on('click', function(){
          $(this).remove();
          displayTweets();
        })

        $('.js-tweet-user').on('click', function(){
          var userName = $(this).data('user-name');
          var $tweets =  $('.js-tweet');
          $tweets.fadeOut();
          $tweets.find("[data-user-name*=" + userName + "]").closest('.js-tweet').fadeIn();
        })

      });
    </script>
    <header class="twittler__header">
        <a href="" class="twittler__logo">Twittler</a>
        <a href="" class="twittler__home">Home</a>
    </header>

    <section class="twittler__body">
      <aside class="twittler__sidebar"></aside>
      <section class="twittler__main">
        <section class="twittler__feed js-feed"></section>
      </section>
    </section>

  </body>
</html>
